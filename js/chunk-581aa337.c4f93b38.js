(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-581aa337"],{a2e7:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bgImg3"},[a("div",{staticClass:"slogan"},[a("span",[t._v(t._s(t.$t("CustomerOrder.Notice")))])])]),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container frontOrderContainer"},[a("div",{staticClass:"row justify-content-md-center"},[a("div",{staticClass:"col col-md-8 container"},[t.cart.carts.length?a("span",{staticClass:"direct"},[t._v(" "+t._s(t.$t("CustomerOrder.CheckCartItem"))+" ")]):t._e(),t.cart.carts.length?a("table",{staticClass:"table table-striped mt-4 frontOrderTable"},[a("thead",[a("th"),a("th"),a("th",[t._v(t._s(t.$t("Cart.ItemName")))]),a("th",[t._v(t._s(t.$t("Cart.Qty")))])]),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCart(e.id)}}},[a("i",{staticClass:"fas fa-trash-alt"})])]),a("td",{staticClass:"align-middle img"},[a("div",{staticStyle:{height:"50px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.product.imageUrl+")"}})]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(t.$t("Product."+e.product.title))+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v(" "+t._s(t.$t("CustomerOrder.HaveCouponConfirm"))+" ")]):t._e()]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.qty)+t._s(t.$t("Cart."+e.product.unit))+" ")])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v(t._s(t.$t("Cart.TotalPrice")))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v(t._s(t.$t("Cart.FinalPrice")))]),a("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t.cart.final_total)+" ")])]):t._e()])]):t._e(),0===t.cart.carts.length?a("div",{staticClass:"d-flex flex-column align-items-center noItem"},[t._v(" "+t._s(t.$t("CustomerOrder.CartEmpty"))),a("br"),t._v(" "+t._s(t.$t("CustomerOrder.GuildToShop"))+" "),a("img",{staticClass:"pt-3 pb-3",attrs:{src:s("e017"),alt:"空的購物車"}}),t.cart.carts.length?t._e():a("div",{staticClass:"linkDiv pb-5"},[a("router-link",{attrs:{to:"/products"}},[t._v(" "+t._s(t.$t("CustomerOrder.GoShop")))])],1),a("p",{staticClass:"h2"},[t._v(t._s(t.$t("CustomerOrder.Promote")))]),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.message,expression:"message",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"copyDiv mt-3"},[a("span",[t._v("order999")]),a("p",[t._v(t._s(t.$t("CustomerOrder.ClickCopy")))])])]):t._e(),0!==t.cart.carts.length?a("div",{staticClass:"input-group mb-3 input-group-sm d-flex justify-content-md-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control front-order-input",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v(" "+t._s(t.$t("CustomerOrder.AddCoupon"))+" ")])])]):t._e(),t.cart.carts.length?a("span",{staticClass:"direct border-bottom border-dark"},[t._v(" "+t._s(t.$t("CustomerOrder.FillForm"))+" ")]):t._e(),0!==t.cart.carts.length?a("ValidationObserver",{staticClass:"row justify-content-center pt-2 validDiv",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required|email",name:"email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{staticClass:"text-left",attrs:{for:"email"}},[t._v(t._s(t.$t("Customer.Email")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control front-order-input",class:r,attrs:{id:"email",type:"email",name:"email",size:"10"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]),o?a("span",{staticClass:"valid-feedback"},[t._v(t._s(t.$t("Customer.EmailCorrect")))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required",name:"name",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{attrs:{for:"name"}},[t._v(t._s(t.$t("Customer.OrderName")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control front-order-input",class:r,attrs:{id:"name",type:"name",name:"name"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]),o?a("span",{staticClass:"valid-feedback"},[t._v(t._s(t.$t("Customer.RecipientName"))+" "+t._s(t.form.user.name))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required|numeric",name:"tel",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{attrs:{for:"tel"}},[t._v(t._s(t.$t("Customer.tel")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control front-order-input",class:r,attrs:{id:"tel",type:"tel",name:"tel"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]),o?a("span",{staticClass:"valid-feedback"},[t._v(t._s(t.$t("Customer.RecipientTel"))+" "+t._s(t.form.user.tel))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{rules:"required",name:"address",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{attrs:{for:"address"}},[t._v(t._s(t.$t("Customer.Address")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control front-order-input",class:r,attrs:{id:"address",type:"address",name:"address"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]),o?a("span",{staticClass:"valid-feedback"},[t._v(t._s(t.$t("Customer.RecipientAddress"))+" "+t._s(t.form.user.address))]):t._e()]}}],null,!0)}),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v(t._s(t.$t("Customer.Message"))+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control front-order-input",attrs:{name:"",id:"comment",placeholder:"有客製化需求請填寫",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"mb-5"},[a("p",{staticClass:"text-left"},[t._v(t._s(t.$t("CustomerOrder.NextStep")))]),t.cart.carts.length?a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s}},[t._v(" "+t._s(t.$t("CustomerOrder.Summit"))+" ")]):t._e()])],1)]}}],null,!1,149032397)}):t._e()],1)])])])])},r=[],o=(s("99af"),s("4160"),s("a434"),s("159b"),s("5530")),i=s("2f62"),n={name:"CustomerOrder",data:function(){return{coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},message:"order999",on:""}},methods:Object(o["a"])({getCart:function(){var t=this;t.cart=JSON.parse(localStorage.getItem("cart"))||[],t.total=0,t.cartLength=0,t.cart.forEach((function(e){t.total+=e.total,t.cartLength+=e.qty}))},addTocart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,a=-1;if(s.getCart(),s.cart.length>0&&s.cart.forEach((function(e,s){e.id===t.id&&(a=s)})),-1===a){var r=parseInt(t.origin_price*e,10);s.$set(t,"qty",e),s.$set(t,"total",r),s.cart.push(t)}else{var i=Object(o["a"])({},s.cart[a]);i.qty+=e;var n=parseInt(t.origin_price*i.qty,10);i.total=n,s.cart.splice(a,1),s.cart.push(i)}localStorage.setItem("cart",JSON.stringify(s.cart)),s.getCart()},removeCart:function(t){this.$store.dispatch("cartsModules/removeCart",t)},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("wangg","/coupon");t.$store.dispatch("updataLoading",!0);var s={code:t.coupon_code};t.$http.post(e,{data:s}).then((function(e){e.data.success?(t.$store.dispatch("updateMessage",{message:e.data.message,status:"success"}),t.getCart()):t.$store.dispatch("updateMessage",{message:e.data.message,status:"danger"}),t.$store.dispatch("updataLoading",!1)}))},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("wangg","/order"),s=t.form;t.$store.dispatch("updataLoading",!0),t.$http.post(e,{data:s}).then((function(e){e.data.success&&t.$router.push("/customercheck/".concat(e.data.orderId)),t.$store.dispatch("updataLoading",!1)}))},onCopy:function(){var t=this;t.on=1,t.alert()},onError:function(){var t=this;t.on=0,t.alert()},alert:function(){var t=this;1===t.on?t.$store.dispatch("updateMessage",{message:"複製成功",status:"success"}):t.$store.dispatch("updateMessage",{message:"複製失敗",status:"success"})}},Object(i["b"])("cartsModules",["getCart"])),computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])("cartsModules",["cart"])),Object(i["c"])(["isLoading"])),created:function(){var t=this;t.getCart()}},c=n,l=s("2877"),d=Object(l["a"])(c,a,r,!1,null,null,null);e["default"]=d.exports},e017:function(t,e,s){t.exports=s.p+"img/empty.8f33c7a2.jpg"}}]);
//# sourceMappingURL=chunk-581aa337.c4f93b38.js.map