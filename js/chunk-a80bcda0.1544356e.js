(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a80bcda0"],{"658f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Productwrap container-fluid"},[a("div",{staticClass:"wrap"},[a("div",{attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"detailModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"detailModalLabel"}},[a("span",[t._v(t._s(t.$t("Product."+t.product.title)))])])]),a("div",{staticClass:"row",attrs:{role:"document"}},[a("div",{staticClass:"col-md-7 border-0"},[a("div",{staticClass:"modal-body"},[t.loadTxt?a("div",{staticClass:"d-flex flex-row"},[a("div",{staticClass:"pt-3 loadingTxt"},[t._v("資料讀取中")]),t._m(0)]):t._e(),a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:"產品圖片"}})])]),a("div",{staticClass:"col-md-5 pt-5"},[a("blockquote",{staticClass:"blockquote mt-3"},[a("footer",{staticClass:"blockquote-footer text-left text-body"},[t._v(" "+t._s(t.$t("Product."+t.product.description))+" ")])]),a("p",{staticClass:"text-left pt-2 text-muted"},[t._v(" "+t._s(t.$t("ProductVue.Notice"))),a("br"),t._v(" "+t._s(t.$t("ProductVue.P1"))),a("br"),t._v(" "+t._s(t.$t("ProductVue.P2"))),a("br"),t._v(" "+t._s(t.$t("ProductVue.P3"))),a("br"),t._v(" "+t._s(t.$t("ProductVue.P4"))),a("br"),t._v(" "+t._s(t.$t("ProductVue.P5"))),a("br"),t._v(" Window Width: "+t._s(t.windowWidth)+" "),a("br"),t._v(" 測試用 ")]),a("p",{staticClass:"h6 text-right"},[t._v(" "+t._s(t.$t("ProductVue.OriginPrice"))+" "),t.product.price?a("del",[t._v(t._s(t.product.origin_price))]):t._e()]),t.product.price?a("p",{staticClass:"h5 text-right font-weight-bold"},[t._v(" "+t._s(t.$t("ProductVue.Price"))+" "+t._s(t.product.price)+" ")]):t._e()])]),a("div",{staticClass:"modal-footer mt-5 d-flex justify-content-end"},[a("div",{staticClass:"d-flex justify-content-start mt-5"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control w-100",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v(" "+t._s(t.$t("ProductVue.Selet"))+" ")]),t._l(10,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t.$t("ProductVue.Choose"))+t._s(e)+" "+t._s(t.$t("Cart."+t.product.unit))+" ")])}))],2),a("span",{staticClass:"text-muted text-nowrap p-2"},[t._v(" "+t._s(t.$t("ProductVue.Total"))+" "),t.product.num*t.product.price>=0?a("strong",[t._v(" "+t._s(t.product.num*t.product.price)+" ")]):t._e()])]),a("button",{staticClass:"btn btn-secondary mt-5",attrs:{type:"button"},on:{click:function(e){return t.addTocart(t.product,t.product.num)}}},[t.product.id===t.status.loadingItem?a("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e(),t._v(" "+t._s(t.$t("ProductVue.AddToCart"))+" ")])]),a("div",{staticClass:"text-left pl-2 mt-5 mb-5"},[a("span",{staticClass:"h3"},[t._v(t._s(t.$t("ProductVue.Recommend")))])]),t.loadTxt?a("span",[t._v(" "+t._s(t.swiperHeight)+" 看到這段文字，表示後端資料處理中 ")]):t._e(),a("swiper",{ref:"checkHeight",staticClass:"swiper mb-3 mt-3",attrs:{options:t.swiperOption,breakpoints:t.swiperOption.breakpoints}},[t._l(t.lightbox,(function(e){return a("swiper-slide",{key:e.id,class:{widthResize:t.windowWidth<700}},[a("div",{staticClass:"card h-100 mt-3"},[a("div",{staticClass:"lightbox-img"},[a("div",{style:{backgroundImage:"url("+e.imageUrl+")"},on:{click:function(a){return a.preventDefault(),t.toProduct(e.id)}}})]),a("div",{staticClass:"card-body text-left d-flex flex-column p-0"},[a("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.$t("Product."+e.title))+" ")]),a("div",{staticClass:"text-truncate pb-2"},[t._v(" "+t._s(t.$t("Product."+e.description))+" ")]),a("div",{staticClass:"d-flex mt-auto w-100"},[e.price?t._e():a("div",[t._v(" NT "+t._s(t._f("currency")(e.originPrice))+" ")]),e.price?a("del",{staticClass:"text-muted mr-auto"},[t._v("NT "+t._s(t._f("currency")(e.origin_price)))]):t._e(),e.price?a("div",{staticClass:"text-danger"},[t._v(" NT "+t._s(t._f("currency")(e.price))+" ")]):t._e()])])])])})),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loadingWrap align-self-end"},[a("div",{staticClass:"dot"}),a("div",{staticClass:"dot"}),a("div",{staticClass:"dot"})])}],r=(a("99af"),a("4de4"),a("4160"),a("c975"),a("a434"),a("159b"),a("5530")),o=a("2f62"),c=a("7212"),d={name:"Product",data:function(){return{product:{},status:{loadingItem:""},cart:[],carData:[],newarray:[],windowWidth:window.innerWidth,swiperHeight:0,loadTxt:!0,swiperOption:{loop:!0,slidesPerView:1,spaceBetween:30,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{1050:{slidesPerView:4,spaceBetween:30},700:{slidesPerView:3,spaceBetween:30},475:{slidesPerView:2,spaceBetween:30}}}}},components:{Swiper:c["Swiper"],SwiperSlide:c["SwiperSlide"]},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",t.onResize),t.onResize(),console.log(1,t.$store.dispatch("updataLoading"))}))},beforeDestroy:function(){window.addEventListener("resize",this.onResize)},methods:Object(r["a"])(Object(r["a"])({getProduct:function(t){var e=this;this.loadTxt=!0;var a=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("wangg","/product/").concat(t);a.$store.dispatch("updataLoading",!0),a.$http.get(i).then((function(t){a.product=t.data.product,a.product.num=1,a.lightBoxData(a.product.id),a.$store.dispatch("updataLoading",!1),e.loadTxt=!1}))},addTocart:function(t,e){var a=this,i=[];if(a.localCarData.forEach((function(t){i.push(t.productId)})),-1===i.indexOf(t.id)){var s={productId:t.id,qty:e,Title:t.title,originPrice:t.origin_price,price:t.price};a.carData.push(s),a.$store.dispatch("cartsModules/updatelocalCarData",s),localStorage.setItem("carData",JSON.stringify(a.carData))}else{var r={};a.localCarData.forEach((function(i,s){if(i.productId===t.id){var o=i.qty;r={productId:t.id,qty:o+e,Title:t.title,originPrice:t.origin_price,price:t.price},a.carData.splice(s,1)}})),a.carData.push(r),a.$store.dispatch("cartsModules/updatelocalCarData",r),localStorage.setItem("carData",JSON.stringify(a.carData))}a.$store.dispatch("updateMessage",{message:"已加入購物車",status:"success"})},lightBoxData:function(t){var e=this;e.newarray=[],e.products.filter((function(a){t!==a.id&&e.newarray.push(a)}))},toProduct:function(t){var e=this;e.$store.dispatch("updataLoading",!0),e.$router.push("/product/".concat(t)),this.getProduct(t),e.$route.params.productId=t,e.$store.dispatch("updataLoading",!1)},onResize:function(){this.windowWidth=window.innerWidth}},Object(o["b"])("productModules",["getProducts"])),Object(o["b"])("cartsModules",["updatelocalCarData","getlocalCarData"])),computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({lightbox:function(){var t=this;return t.newarray}},Object(o["c"])("productModules",["products"])),Object(o["c"])(["isLoading"])),Object(o["c"])("cartsModules",["localCarData"])),created:function(){var t=this;t.getProduct(t.$route.params.productId),t.getProducts(),t.getlocalCarData()}},n=d,l=a("2877"),u=Object(l["a"])(n,i,s,!1,null,null,null);e["default"]=u.exports},c975:function(t,e,a){"use strict";var i=a("23e7"),s=a("4d64").indexOf,r=a("a640"),o=a("ae40"),c=[].indexOf,d=!!c&&1/[1].indexOf(1,-0)<0,n=r("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:d||!n||!l},{indexOf:function(t){return d?c.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-a80bcda0.1544356e.js.map